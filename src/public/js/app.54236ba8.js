(function(e){function t(t){for(var a,s,i=t[0],l=t[1],c=t[2],d=0,m=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&m.push(n[s][0]),n[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,i=1;i<r.length;i++){var l=r[i];0!==n[l]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},n={app:0},o=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"1ba5":function(e,t,r){"use strict";var a=r("c18a"),n=r.n(a);n.a},2861:function(e,t,r){"use strict";var a=r("889b"),n=r.n(a);n.a},3608:function(e,t,r){e.exports=r.p+"img/brewery.696a4b02.jpg"},"56d7":function(e,t,r){"use strict";r.r(t);r("45fc"),r("d3b7"),r("8a79"),r("96cf");var a=r("1da1"),n=(r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("2b0e")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("Navbar"),r("v-content",[r("v-container",[r("router-view")],1)],1),r("Footer")],1)},s=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[a("v-app-bar-nav-icon",{staticClass:"d-inline-block d-lg-none",on:{click:function(t){e.drawer=!0}}}),a("v-spacer",{staticClass:"d-inline-block d-lg-none"}),a("router-link",{attrs:{tag:"h1",to:"/"}},[e._v("Oceń Piwo")]),a("v-spacer"),a("v-navigation-drawer",{attrs:{app:"",absolute:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[e._v("Oceń Piwo")])],1)],1),a("v-divider"),a("v-list",{attrs:{dense:""}},[a("v-list-item-group",e._l(e.routes,(function(t){return a("v-list-item",{key:t.path,attrs:{link:"",to:t.path}},[a("v-list-item-avatar",[a("v-icon",[e._v(" "+e._s(t.icon)+" ")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.name))])],1)],1)})),1),e.$store.state.isLoggedIn?a("v-list-item-group",[a("v-list-item",{attrs:{to:"/users/"+e.$store.state.user._id}},[a("v-list-item-avatar",[a("v-icon",[e._v(" fas fa-user ")])],1),a("v-list-item-title",[e._v("Profil użytkownika")])],1),a("v-list-item",{on:{click:e.logout}},[a("v-list-item-avatar",[a("v-icon",[e._v(" fas fa-sign-out-alt ")])],1),a("v-list-item-title",[e._v("Wyloguj")])],1)],1):a("v-list-item-group",[a("v-list-item",{attrs:{to:"/login"}},[a("v-list-item-avatar",[a("v-icon",[e._v(" fas fa-sign-in-alt ")])],1),a("v-list-item-title",[e._v(" Logowanie ")])],1),a("v-list-item",{attrs:{to:"/register"}},[a("v-list-item-avatar",[a("v-icon",[e._v(" fas fa-user-circle ")])],1),a("v-list-item-title",[e._v(" Rejestracja ")])],1)],1)],1)],1),a("div",{staticClass:"d-lg-inline-block d-none"},[e._l(e.routes,(function(t){return a("v-btn",{key:t.path,staticClass:"mr-2 ",attrs:{to:t.path,text:""}},[a("v-icon",{staticClass:"mr-2"},[e._v(" "+e._s(t.icon)+" ")]),e._v(" "+e._s(t.name))],1)})),e.$store.state.isLoggedIn?[a("v-btn",{attrs:{rounded:""},on:{click:e.logout}},[a("v-icon",[e._v(" fas fa-sign-out-alt ")]),e._v(" Wyloguj ")],1),a("v-btn",{staticClass:"ml-2 pr-0",attrs:{rounded:"",to:"/users/"+e.$store.state.user._id,color:"secondary"}},[e._v(" Mój profil "),a("img",{staticClass:"avatar-image-small ",attrs:{src:e.$store.state.user.avatarImage?e.$store.state.user.avatarImage:r("c121")}})])]:[a("v-btn",{staticClass:"mr-2 ",attrs:{text:"",to:"/register"}},[e._v("rejestracja")]),a("v-btn",{staticClass:"mr-2 ",attrs:{text:"",to:"/login"}},[e._v("logowanie")])]],2)],1)],1)},l=[],c={name:"Navbar",data:function(){return{drawer:!1,routes:[{icon:"fas fa-beer",name:"Wyszukiwarka",path:"/search-beer"},{icon:"fas fa-industry",name:"Browary",path:"/breweries"},{icon:"fas fa-list",name:"Gatunki piw",path:"/beer-types"}]}},methods:{logout:function(){this.$store.dispatch("logout"),this.$router.push("/")}}},u=c,d=(r("1ba5"),r("2877")),m=r("6544"),p=r.n(m),v=r("40dc"),f=r("5bc1"),b=r("8336"),g=r("ce7e"),h=r("132d"),w=r("8860"),y=r("da13"),x=r("8270"),_=r("5d23"),k=r("1baa"),V=r("f774"),$=r("2fa4"),C=Object(d["a"])(u,i,l,!1,null,"508a9328",null),j=C.exports;p()(C,{VAppBar:v["a"],VAppBarNavIcon:f["a"],VBtn:b["a"],VDivider:g["a"],VIcon:h["a"],VList:w["a"],VListItem:y["a"],VListItemAvatar:x["a"],VListItemContent:_["a"],VListItemGroup:k["a"],VListItemTitle:_["c"],VNavigationDrawer:V["a"],VSpacer:$["a"]});var O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-footer",{staticClass:"text-center"},[r("v-container",[r("v-row",[r("v-col",[e._v(" Karol Wiater L03 ")])],1),r("v-row",[r("v-col",[r("v-btn",{attrs:{icon:"",color:"primary"}},[r("v-icon",[e._v("fab fa-facebook-square")])],1),r("v-btn",{attrs:{color:"primary",icon:"",href:"mailto:karolwiater0@gmail.com"}},[r("v-icon",[e._v("fas fa-envelope")])],1)],1)],1)],1)],1)},B=[],R={name:"Footer"},T=R,S=r("62ad"),I=r("a523"),P=r("553a"),z=r("0fd9"),D=Object(d["a"])(T,O,B,!1,null,"1f470d68",null),L=D.exports;p()(D,{VBtn:b["a"],VCol:S["a"],VContainer:I["a"],VFooter:P["a"],VIcon:h["a"],VRow:z["a"]});var E={name:"App",components:{Navbar:j,Footer:L}},U=E,N=(r("5c0b"),r("7496")),M=r("a75b"),F=Object(d["a"])(U,o,s,!1,null,null,null),A=F.exports;p()(F,{VApp:N["a"],VContainer:I["a"],VContent:M["a"]});var q=r("8c4f"),Z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-row",[r("v-col",{staticClass:"text-center"},[r("h1",[e._v("Witaj w serwisie oceń piwo!")])])],1)],1)},G=[],W={name:"Home"},J=W,H=Object(d["a"])(J,Z,G,!1,null,null,null),K=H.exports;p()(H,{VCol:S["a"],VContainer:I["a"],VRow:z["a"]});var Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-col",{staticClass:"mx-auto",attrs:{cols:"12",md:"6"}},[r("v-card",[r("v-card-title",[e._v("Logowanie")]),r("v-card-text",[r("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit,n=t.invalid;return[r("v-form",{attrs:{value:!n},on:{submit:function(t){return t.preventDefault(),a(e.login)}}},[r("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"email"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors,n=t.error;return[r("v-text-field",{attrs:{type:"email",error:n,"error-messages":a,label:"E-mail"},model:{value:e.loginData.email,callback:function(t){e.$set(e.loginData,"email",t)},expression:"loginData.email"}})]}}],null,!0)}),r("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors,n=t.error;return[r("v-text-field",{attrs:{type:"password",error:n,"error-messages":a,label:"Hasło"},model:{value:e.loginData.password,callback:function(t){e.$set(e.loginData,"password",t)},expression:"loginData.password"}})]}}],null,!0)}),r("v-btn",{staticClass:"lighten-5",attrs:{disabled:n,rounded:"",color:"primary",block:"",type:"submit",loading:e.loggingIn}},[e._v("Zaloguj")])],1)]}}])})],1)],1)],1)},X=[],Y={name:"Login",data:function(){return{loggingIn:!1,loginData:{email:"",password:""}}},methods:{login:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loggingIn=!0,t.next=4,e.$store.dispatch("login",e.loginData);case 4:e.$router.push("/"),e.$store.toast.success("Zalogowano",{duration:4e3,position:"bottom-right"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:e.loggingIn=!1;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},ee=Y,te=r("b0af"),re=r("99d9"),ae=r("4bd4"),ne=r("8654"),oe=Object(d["a"])(ee,Q,X,!1,null,"2d0bba15",null),se=oe.exports;p()(oe,{VBtn:b["a"],VCard:te["a"],VCardText:re["a"],VCardTitle:re["b"],VCol:S["a"],VForm:ae["a"],VTextField:ne["a"]});var ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",{staticClass:"mx-auto",attrs:{cols:"12",md:"6"}},[a("v-card",[a("v-card-title",[e._v("Rejestracja")]),a("v-card-text",[a("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit,o=t.invalid;return[a("v-form",{attrs:{value:!o},on:{submit:function(t){return t.preventDefault(),n(e.register)}}},[a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"email"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("v-text-field",{attrs:{type:"email",error:n,"error-messages":r,label:"E-mail"},model:{value:e.userData.email,callback:function(t){e.$set(e.userData,"email",t)},expression:"userData.email"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required|max:50|min:4"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("v-text-field",{attrs:{error:n,"error-messages":r,label:"Nazwa użytkownika"},model:{value:e.userData.username,callback:function(t){e.$set(e.userData,"username",t)},expression:"userData.username"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1 d-flex",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,o=t.error;return[a("img",{staticClass:"avatar-image-small mr-3",attrs:{src:e.userData.avatarImage?e.userData.avatarImage:r("c121")}}),a("v-text-field",{attrs:{error:o,"error-messages":n,label:"Avatar użytkownika (adres URL)"},model:{value:e.userData.avatarImage,callback:function(t){e.$set(e.userData,"avatarImage",t)},expression:"userData.avatarImage"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required",name:"confirm"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("v-text-field",{attrs:{type:"password",error:n,"error-messages":r,label:"Hasło"},model:{value:e.userData.password,callback:function(t){e.$set(e.userData,"password",t)},expression:"userData.password"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required|password:@confirm"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("v-text-field",{attrs:{type:"password",error:n,"error-messages":r,label:"Powtórz hasło"},model:{value:e.userData.passwordRepeat,callback:function(t){e.$set(e.userData,"passwordRepeat",t)},expression:"userData.passwordRepeat"}})]}}],null,!0)}),a("v-btn",{staticClass:"lighten-5",attrs:{disabled:o,rounded:"",color:"primary",block:"",type:"submit",loading:e.registering}},[e._v("Zarejestruj")])],1)]}}])})],1)],1)],1)},le=[],ce={name:"Login",data:function(){return{registering:!1,userData:{email:"",username:"",password:"",passwordRepeat:"",avatarImage:""}}},methods:{register:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.registering=!0,t.next=4,e.$store.dispatch("register",e.userData);case 4:e.registering=!1,e.$router.push("/login"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},ue=ce,de=Object(d["a"])(ue,ie,le,!1,null,null,null),me=de.exports;p()(de,{VBtn:b["a"],VCard:te["a"],VCardText:re["a"],VCardTitle:re["b"],VCol:S["a"],VForm:ae["a"],VTextField:ne["a"]});var pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-row",[r("v-col",{staticClass:"mx-auto col-12 col-md-6"},[r("SearchBeer")],1)],1)],1)},ve=[],fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[e._v(" Znajdź piwo: "),r("v-spacer"),r("BeerModal",{ref:"beerModal",attrs:{hidden:!e.$store.state.isLoggedIn},on:{beerListEdited:e.searchBeer}})],1),r("v-card-text",[r("v-form",{on:{submit:function(t){return t.preventDefault(),e.searchBeer(t)}}},[r("v-text-field",{attrs:{clearable:"",placeholder:"Podaj nazwę"},model:{value:e.searchByName,callback:function(t){e.searchByName=t},expression:"searchByName"}}),r("v-expansion-panels",{attrs:{flat:""}},[r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Więcej opcji")]),r("v-expansion-panel-content",[r("BeerTypeSelector",{attrs:{label:"Gatunek piwa"},model:{value:e.beerType,callback:function(t){e.beerType=t},expression:"beerType"}}),r("BrewerySelector",{attrs:{label:"Browar"},model:{value:e.brewery,callback:function(t){e.brewery=t},expression:"brewery"}}),r("v-row",{staticClass:"py-0"},[r("v-col",{staticClass:"py-0"},[r("v-radio-group",{staticClass:"my-0",model:{value:e.sort,callback:function(t){e.sort=t},expression:"sort"}},[e._v(" Sortowanie: "),r("v-radio",{attrs:{value:"createdDate",label:"Data dodania"}}),r("v-radio",{attrs:{value:"name",label:"Alfabetycznie"}}),r("v-radio",{attrs:{value:"avgRating",label:"Średnia ocen"}})],1)],1),r("v-col",{staticClass:"py-0"},[r("v-radio-group",{staticClass:"my-0",model:{value:e.sortDir,callback:function(t){e.sortDir=t},expression:"sortDir"}},[e._v(" Kierunek: "),r("v-radio",{attrs:{value:1,label:"Rosnąco"}}),r("v-radio",{attrs:{value:-1,label:"Malejąco"}})],1)],1)],1),r("v-btn",{attrs:{rounded:"",color:"secondary"},on:{click:e.clearSearchFields}},[e._v(" Wyszyść ")])],1)],1)],1),r("v-btn",{attrs:{rounded:"",block:"",color:"primary",type:"submit",disabled:e.loading}},[e._v(" Szukaj ")])],1),r("BeerList",{staticClass:"mt-2",attrs:{beers:e.searchResult,loading:e.loading},on:{deleteBeer:e.deleteBeer,editBeer:e.editBeer}})],1)],1)},be=[],ge=(r("99af"),r("d81d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"position-relative"},[a("loader",{attrs:{loading:e.loading}}),e.beers.length?a("v-list",[a("v-list-item-group",{model:{value:e.item,callback:function(t){e.item=t},expression:"item"}},e._l(e.beers,(function(t){return a("v-list-item",{key:t._id,staticClass:"px-0 px-md-2",attrs:{"two-line":"",to:"/beers/"+t._id}},[a("v-list-item-avatar",[a("img",{staticClass:"avatar-image-small",attrs:{src:null==t.image?r("b34d"):t.image,alt:""}})]),a("v-list-item-content",[a("v-list-item-title",{staticClass:"d-flex justify-space-between"},[e._v(e._s(t.name)+" "),a("star-rating",{attrs:{"read-only":"",increment:.01,"star-size":15,"show-rating":!1},model:{value:t.avgRating,callback:function(r){e.$set(t,"avgRating",r)},expression:"beer.avgRating"}})],1),a("v-list-item-subtitle",[e._v("Browar: "),t.brewery?a("router-link",{attrs:{to:"/breweries/"+t.brewery._id}},[e._v(" "+e._s(t.brewery.name))]):a("span",[e._v("nieznany")])],1),a("v-list-item-subtitle",[e._v("Gatunek: "),e._l(t.beerType,(function(t){return a("v-chip",{key:t._id,attrs:{small:""}},[e._v(" "+e._s(t.name)+" ")])}))],2)],1)],1)})),1)],1):a("h2",{staticClass:"py-4 text-center"},[e._v("Brak piw")])],1)}),he=[],we=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-overlay",{attrs:{absolute:"",value:e.loading}},[r("v-progress-circular",{attrs:{indeterminate:"",size:50,color:"primary"}})],1)},ye=[],xe={name:"Loader",props:["loading"]},_e=xe,ke=r("a797"),Ve=r("490a"),$e=Object(d["a"])(_e,we,ye,!1,null,"17b64c7b",null),Ce=$e.exports;p()($e,{VOverlay:ke["a"],VProgressCircular:Ve["a"]});var je=r("c1da"),Oe=r.n(je),Be={name:"BeerList",components:{Loader:Ce,StarRating:Oe.a},props:["beers","loading"],data:function(){return{item:null}}},Re=Be,Te=r("cc20"),Se=Object(d["a"])(Re,ge,he,!1,null,"6ec0a4f4",null),Ie=Se.exports;p()(Se,{VChip:Te["a"],VList:w["a"],VListItem:y["a"],VListItemAvatar:x["a"],VListItemContent:_["a"],VListItemGroup:k["a"],VListItemSubtitle:_["b"],VListItemTitle:_["c"]});var Pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"600"},on:{"click:outside":e.close},scopedSlots:e._u([e.hidden?null:{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{color:"secondary",rounded:""}},r),[e._v(" Dodaj piwo ")])]}}],null,!0),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[e._v(" Piwo dodawanie/edycja "),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:e.close}},[a("v-icon",[e._v(" fas fa-times ")])],1)],1),a("v-card-text",[a("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit,o=t.invalid;return[a("v-form",{attrs:{value:!o},on:{submit:function(t){return t.preventDefault(),n(e.submit)}}},[a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required|min:4|max:50"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("v-text-field",{attrs:{error:n,"error-messages":r,label:"Nazwa piwa"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"max:256"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,o=t.error;return[a("v-text-field",{attrs:{error:o,"error-messages":n,label:"Adres obrazka"},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a("img",{staticClass:"avatar-image",attrs:{src:e.model.image?e.model.image:r("b34d"),alt:""}})]},proxy:!0}],null,!0),model:{value:e.model.image,callback:function(t){e.$set(e.model,"image",t)},expression:"model.image"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("BeerTypeSelector",{attrs:{invalid:n,errors:r,label:"Gatunek piwa"},model:{value:e.model.beerType,callback:function(t){e.$set(e.model,"beerType",t)},expression:"model.beerType"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("BrewerySelector",{attrs:{invalid:n,errors:r,label:"Browar"},model:{value:e.model.brewery,callback:function(t){e.$set(e.model,"brewery",t)},expression:"model.brewery"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required|max:512"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("v-textarea",{attrs:{rows:"2",error:n,"error-messages":r,label:"Opis produktu"},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required|max_value:100|min_value:0"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("v-slider",{attrs:{max:"100",min:"0",error:n,"error-messages":r,label:"Zawartość alkoholu %"},scopedSlots:e._u([{key:"append",fn:function(){return[a("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{"hide-details":"","single-line":"",type:"number"},model:{value:e.model.alcoholPercentage,callback:function(t){e.$set(e.model,"alcoholPercentage",t)},expression:"model.alcoholPercentage"}}),e._v(" % ")]},proxy:!0}],null,!0),model:{value:e.model.alcoholPercentage,callback:function(t){e.$set(e.model,"alcoholPercentage",t)},expression:"model.alcoholPercentage"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required|max_value:160|min_value:1"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("v-slider",{attrs:{max:"160",min:"1",error:n,"error-messages":r,label:"Goryczka (IBU):"},scopedSlots:e._u([{key:"append",fn:function(){return[a("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{"hide-details":"","single-line":"",type:"number"},model:{value:e.model.IBU,callback:function(t){e.$set(e.model,"IBU",t)},expression:"model.IBU"}})]},proxy:!0}],null,!0),model:{value:e.model.IBU,callback:function(t){e.$set(e.model,"IBU",t)},expression:"model.IBU"}})]}}],null,!0)}),a("v-btn",{attrs:{type:"submit",rounded:"",disabled:o,block:"",color:e.edit?"info":"success"}},[e._v("Zapisz zmiany")])],1)]}}])})],1)],1)],1)},ze=[],De=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-autocomplete",{attrs:{value:e.value,items:e.breweries,label:e.label,clearable:"",filled:"",dense:"",rounded:"","no-data-text":"Brak browarów","error-messages":e.errors,error:e.invalid,"item-text":"name","return-object":!0},on:{input:e.updateValue},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[e._v(" "+e._s(r.name)+" ")]}}])})},Le=[],Ee={name:"BrewerySelector",data:function(){return{select:null,breweries:[],loading:!1}},props:{invalid:{type:Boolean,default:!1},value:{type:Object,default:function(){}},errors:{type:Array,default:function(){return[]}},label:{type:String}},methods:{updateValue:function(e){this.$emit("input",e)},getBreweries:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$http.get("/api/breweries");case 4:r=t.sent,e.breweries=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.error(t.t0);case 11:e.loading=!1;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},created:function(){this.getBreweries()}},Ue=Ee,Ne=r("c6a6"),Me=Object(d["a"])(Ue,De,Le,!1,null,"09d01f2c",null),Fe=Me.exports;p()(Me,{VAutocomplete:Ne["a"]});var Ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-autocomplete",{attrs:{value:e.value,items:e.beerTypes,label:e.label,clearable:"",filled:"",rounded:"","no-data-text":"Brak rodzajów piwa",chips:"",dense:"","deletable-chips":"",multiple:"","error-messages":e.errors,error:e.invalid,"item-text":"name","return-object":!0},on:{input:e.updateValue},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[e._v(" "+e._s(r.name)+" ")]}}])})},qe=[],Ze={name:"BeerTypeSelector",data:function(){return{select:null,beerTypes:[],loading:!1}},props:{invalid:{type:Boolean,default:!1},value:{type:Array,default:function(){return[]}},errors:{type:Array,default:function(){return[]}},label:{type:String}},methods:{updateValue:function(e){this.$emit("input",e)},getBeerTypes:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$http.get("/api/beer-types");case 4:r=t.sent,e.beerTypes=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$store.toast.error("Podczas ładowania listy rodzajów piw - ".concat(t.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 11:e.loading=!1;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},created:function(){this.getBeerTypes()}},Ge=Ze,We=Object(d["a"])(Ge,Ae,qe,!1,null,"1339379b",null),Je=We.exports;p()(We,{VAutocomplete:Ne["a"]});var He={name:"BeerModal",components:{BrewerySelector:Fe,BeerTypeSelector:Je},props:["hidden"],data:function(){return{template:{name:"",beerType:[],brewery:null,description:"",user:{},IBU:null,alcoholPercentage:null,image:null},model:{},dialog:!1,edit:!1}},created:function(){Object.assign(this.model,this.template)},methods:{submit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.edit){t.next=5;break}return t.next=3,e.update();case 3:t.next=7;break;case 5:return t.next=7,e.create();case 7:e.$emit("beerListEdited"),e.close();case 9:case"end":return t.stop()}}),t)})))()},create:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("api/beers",e.model);case 3:e.$store.toast.success("Dodano nowe piwo",{duration:4e3,position:"bottom-right"}),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$store.toast.error("Podczas dodawania piwa wystąpił błąd - ".concat(t.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},update:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.put("/api/beers/".concat(e.model._id),e.model);case 3:e.$store.toast.info("Zapisano zmiany",{duration:4e3,position:"bottom-right"}),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$store.toast.error("Podczas dodawania zmian wystąpił błąd - ".concat(t.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},close:function(){var e=this;this.dialog=!1,this.edit=!1,Object.assign(this.model,this.template),this.$nextTick((function(){return e.$refs.form.reset()}))},open:function(e){e?(this.edit=!0,Object.assign(this.model,e)):(this.edit=!1,Object.assign(this.model,this.template)),this.dialog=!0}}},Ke=He,Qe=r("169a"),Xe=r("ba0d"),Ye=r("a844"),et=Object(d["a"])(Ke,Pe,ze,!1,null,"6c73c1f6",null),tt=et.exports;p()(et,{VBtn:b["a"],VCard:te["a"],VCardText:re["a"],VCardTitle:re["b"],VDialog:Qe["a"],VForm:ae["a"],VIcon:h["a"],VSlider:Xe["a"],VSpacer:$["a"],VTextField:ne["a"],VTextarea:Ye["a"]});var rt={name:"SearchBeer",components:{BeerModal:tt,BeerList:Ie,BeerTypeSelector:Je,BrewerySelector:Fe},data:function(){return{searchResult:[],searchByName:"",beerType:[],brewery:{},loading:!1,sort:"createdDate",sortDir:1}},created:function(){this.searchBeer()},methods:{searchBeer:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,r=null,a="api/beers/?",e.searchByName&&(a+="&name=".concat(e.searchByName)),e.brewery&&e.brewery._id&&(a+="&brewery=".concat(e.brewery._id)),e.beerType.length&&(a+="&beerType=".concat(JSON.stringify(e.beerType.map((function(e){return e._id}))))),a+="&sort=".concat(e.sort,"&sortDir=").concat(e.sortDir),t.next=9,e.$http.get(a);case 9:r=t.sent,e.searchResult=r.data,e.loading=!1;case 12:case"end":return t.stop()}}),t)})))()},deleteBeer:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$http.delete("api/beers/".concat(e));case 3:t.searchBeer(),r.next=9;break;case 6:r.prev=6,r.t0=r["catch"](0),console.log(r.t0);case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))()},editBeer:function(e){this.$refs.beerModal.open(e)},clearSearchFields:function(){this.searchByName="",this.beerType=[],this.brewery={},this.sort="createdDate",this.sortDir=1}}},at=rt,nt=r("cd55"),ot=r("49e2"),st=r("c865"),it=r("0393"),lt=r("67b6"),ct=r("43a6"),ut=Object(d["a"])(at,fe,be,!1,null,"2cac6c99",null),dt=ut.exports;p()(ut,{VBtn:b["a"],VCard:te["a"],VCardText:re["a"],VCardTitle:re["b"],VCol:S["a"],VExpansionPanel:nt["a"],VExpansionPanelContent:ot["a"],VExpansionPanelHeader:st["a"],VExpansionPanels:it["a"],VForm:ae["a"],VRadio:lt["a"],VRadioGroup:ct["a"],VRow:z["a"],VSpacer:$["a"],VTextField:ne["a"]});var mt={name:"Search",components:{SearchBeer:dt}},pt=mt,vt=Object(d["a"])(pt,pe,ve,!1,null,"18f8645e",null),ft=vt.exports;p()(vt,{VCol:S["a"],VContainer:I["a"],VRow:z["a"]});var bt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-row",[r("v-col",{staticClass:"mx-auto col-12 col-md-6"},[r("SearchBrewery")],1)],1)],1)},gt=[],ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v(" Znajdź browar: "),a("v-spacer"),a("BreweryModal",{ref:"breweryModal",attrs:{hidden:!e.canAdd},on:{breweriesListEdited:e.searchBrewery}})],1),a("v-card-text",[a("v-form",{on:{submit:function(t){return t.preventDefault(),e.searchBrewery(t)}}},[a("v-text-field",{attrs:{clearable:"",placeholder:"Podaj nazwę","append-outer-icon":"fas fa-search"},on:{"click:click:append-outer":e.searchBrewery},model:{value:e.searchByName,callback:function(t){e.searchByName=t},expression:"searchByName"}}),a("v-btn",{attrs:{rounded:"",block:"",disabled:e.loading,type:"submit",color:"primary"}},[e._v(" Szukaj ")])],1),a("div",{staticClass:"position-relative mt-2"},[a("loader",{attrs:{loading:e.loading}}),e.searchResult.length?a("v-list",[a("v-list-item-group",{model:{value:e.item,callback:function(t){e.item=t},expression:"item"}},e._l(e.searchResult,(function(t){return a("v-list-item",{key:t._id,attrs:{"two-line":"",to:"/breweries/"+t._id}},[a("v-list-item-avatar",[a("img",{attrs:{src:null==t.image?r("3608"):t.image,alt:""}})]),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.name))]),a("v-list-item-subtitle",[e._v("Adres: "+e._s(t.address?t.address:"Nieznany"))])],1),e.$store.state.isLoggedIn?a("v-list-item-action",{staticClass:"flex-row"}):e._e()],1)})),1)],1):a("h2",{staticClass:"text-center py-4"},[e._v("Brak browarów")])],1)],1)],1)},wt=[],yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"600"},on:{"click:outside":e.close},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.hidden?e._e():a("v-btn",e._g({attrs:{color:"secondary",rounded:""}},r),[e._v(" Dodaj browar ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[e._v(" Browar dodawanie/edycja "),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:e.close}},[a("v-icon",[e._v(" fas fa-times ")])],1)],1),a("v-card-text",[a("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit,o=t.invalid;return[a("v-form",{attrs:{value:!o},on:{submit:function(t){return t.preventDefault(),n(e.submit)}}},[a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required|min:4|max:100"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("v-text-field",{attrs:{error:n,"error-messages":r,label:"Nazwa browaru"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"max:256"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,o=t.error;return[a("v-text-field",{attrs:{error:o,"error-messages":n,label:"Adres obrazka"},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a("img",{staticClass:"avatar-image",attrs:{src:e.model.image?e.model.image:r("3608"),alt:""}})]},proxy:!0}],null,!0),model:{value:e.model.image,callback:function(t){e.$set(e.model,"image",t)},expression:"model.image"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required|max:150"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("v-text-field",{attrs:{error:n,"error-messages":r,label:"Adres"},model:{value:e.model.address,callback:function(t){e.$set(e.model,"address",t)},expression:"model.address"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"email|max:128"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("v-text-field",{attrs:{error:n,"error-messages":r,label:"Adres e-mail"},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"numeric|max:15"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("v-text-field",{attrs:{error:n,"error-messages":r,label:"Telefon"},model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required|max:512"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("v-textarea",{attrs:{rows:"2",error:n,"error-messages":r,label:"Opis browar"},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})]}}],null,!0)}),a("v-btn",{attrs:{type:"submit",rounded:"",disabled:o,block:"",color:e.edit?"info":"success"}},[e._v("Zapisz zmiany")])],1)]}}])})],1)],1)],1)},xt=[],_t={name:"BreweryModal",props:["hidden"],data:function(){return{template:{name:"",location:{type:"Point",coordinates:[20,30]},email:null,phone:null,description:"",image:null,address:null},model:{},dialog:!1,edit:!1}},created:function(){Object.assign(this.model,this.template)},methods:{submit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.edit){t.next=5;break}return t.next=3,e.update();case 3:t.next=7;break;case 5:return t.next=7,e.create();case 7:e.$emit("breweriesListEdited"),e.close();case 9:case"end":return t.stop()}}),t)})))()},updateValue:function(){this.$emit("input",this.model)},create:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("api/breweries",e.model);case 3:e.$store.toast.success("Pomyślnie dodano nowy browar",{duration:4e3,position:"bottom-right"}),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$store.toast.error("Podczas dodawania browaru wystąpił błąd - ".concat(t.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},update:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.put("/api/breweries/".concat(e.model._id),e.model);case 3:e.$store.toast.info("Pomyślnie zapisano zmiany",{duration:4e3,position:"bottom-right"}),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$store.toast.error("Podczas dodawania zmian wystąpił błąd - ".concat(t.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},close:function(){var e=this;this.dialog=!1,this.edit=!1,Object.assign(this.model,this.template),this.$nextTick((function(){return e.$refs.form.reset()}))},open:function(e){e?(this.edit=!0,Object.assign(this.model,e)):(this.edit=!1,Object.assign(this.model,this.template)),this.dialog=!0}}},kt=_t,Vt=Object(d["a"])(kt,yt,xt,!1,null,"629d7b84",null),$t=Vt.exports;p()(Vt,{VBtn:b["a"],VCard:te["a"],VCardText:re["a"],VCardTitle:re["b"],VDialog:Qe["a"],VForm:ae["a"],VIcon:h["a"],VSpacer:$["a"],VTextField:ne["a"],VTextarea:Ye["a"]});var Ct={name:"SearchBrewery",components:{Loader:Ce,BreweryModal:$t},data:function(){return{searchResult:[],searchByName:"",loading:!1,item:null}},created:function(){this.searchBrewery()},computed:{canAdd:function(){return this.$store.state.isLoggedIn&&("breweryOwner"===this.$store.state.user.userRole||"admin"===this.$store.state.user.userRole)}},methods:{searchBrewery:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,r=null,""==e.searchByName){t.next=8;break}return t.next=5,e.$http.get("api/breweries/?name=".concat(e.searchByName));case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,e.$http.get("api/breweries");case 10:r=t.sent;case 11:e.searchResult=r.data,e.loading=!1;case 13:case"end":return t.stop()}}),t)})))()}}},jt=Ct,Ot=r("1800"),Bt=Object(d["a"])(jt,ht,wt,!1,null,null,null),Rt=Bt.exports;p()(Bt,{VBtn:b["a"],VCard:te["a"],VCardText:re["a"],VCardTitle:re["b"],VForm:ae["a"],VList:w["a"],VListItem:y["a"],VListItemAction:Ot["a"],VListItemAvatar:x["a"],VListItemContent:_["a"],VListItemGroup:k["a"],VListItemSubtitle:_["b"],VListItemTitle:_["c"],VSpacer:$["a"],VTextField:ne["a"]});var Tt={name:"Breweries",components:{SearchBrewery:Rt}},St=Tt,It=Object(d["a"])(St,bt,gt,!1,null,"72eee779",null),Pt=It.exports;p()(It,{VCol:S["a"],VContainer:I["a"],VRow:z["a"]});var zt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-row",[r("v-col",{staticClass:"col-12 col-lg-8 mx-auto"},[r("BeerModal",{ref:"beerModal",attrs:{hidden:!0},on:{beerListEdited:e.getBeer}}),r("BeerDetails",{attrs:{beer:e.beer,loading:e.loading},on:{deleteBeer:e.deleteBeer,editBeer:e.editBeer}})],1),r("v-col",{staticClass:"col-lg-8 mx-auto"},[r("opinions",{attrs:{"target-object-id":e.$route.params.id}})],1)],1)],1)},Dt=[],Lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("loader",{attrs:{loading:e.loading}}),a("v-card-text",[a("v-row",[a("v-col",{staticClass:"col-12 col-sm-auto d-flex"},[a("img",{staticClass:"avatar-image mx-auto",attrs:{src:e.beer.image?e.beer.image:r("b34d")}})]),a("v-col",{staticClass:"flex-sm-grow-1 col-12 col-sm-auto"},[a("v-row",[a("v-col",{staticClass:"col-12 col-sm-8"},[a("v-card-title",{staticClass:"pa-0"},[e._v(" "+e._s(e.beer.name)+" ")]),a("p",[e._v("Rodzaj: "),e._l(e.beer.beerType,(function(t){return a("v-chip",{key:t._id},[e._v(" "+e._s(t.name)+" ")])}))],2),a("p",[e._v("Zawartość alkoholu: "+e._s(e.beer.alcoholPercentage?e.beer.alcoholPercentage:"brak informacji")+"%")]),a("p",[e._v("Goryczka (IBU): "+e._s(e.beer.IBU?e.beer.IBU:"brak informacji"))]),e.beer.user?a("p",[e._v("Dodał: "),a("router-link",{attrs:{to:"`/users/${creator._id}`"}},[e._v(" "+e._s(e.beer.user.username)+" ")])],1):e._e(),a("p",[e._v("Browar: "),e.beer.brewery?a("router-link",{attrs:{to:"/breweries/"+e.beer.brewery._id}},[e._v(" "+e._s(e.beer.brewery.name))]):a("span",[e._v("nieznany")])],1)],1),a("v-col",{staticClass:"col-12 col-sm-4"},[e._v(" Średnia ocena: "),e.beer.avgRating?a("star-rating",{attrs:{"star-size":20,"read-only":!0,"round-start-rating":!1,increment:.01,"fixed-points":2},model:{value:e.beer.avgRating,callback:function(t){e.$set(e.beer,"avgRating",t)},expression:"beer.avgRating"}}):a("p",[e._v("brak ocen")]),a("span",[e.canEdit?a("v-btn",{attrs:{icon:"",color:"danger"},on:{click:function(t){return e.$emit("deleteBeer")}}},[a("v-icon",[e._v(" fas fa-trash ")])],1):e._e(),e.canRemove?a("v-btn",{attrs:{icon:"",color:"info"},on:{click:function(t){return e.$emit("editBeer")}}},[a("v-icon",[e._v(" fas fa-pen ")])],1):e._e()],1)],1)],1)],1)],1)],1),a("div",{staticClass:"px-4 pb-4"},[a("h3",[e._v("Opis:")]),e._v(" "+e._s(e.beer.description)+" ")])],1)},Et=[],Ut={name:"BeerDetails",components:{Loader:Ce,StarRating:Oe.a},props:["beer","loading"],computed:{canEdit:function(){return this.beer&&this.$store.state.isLoggedIn&&(this.beer.user&&this.$store.state.user._id===this.beer.user._id||"admin"===this.$store.state.user.userRole||this.beer.brewery&&this.beer.brewery.user===this.$store.state.user._id)},canRemove:function(){return this.beer&&this.$store.state.isLoggedIn&&(this.beer.user&&this.$store.state.user._id===this.beer.user._id||"admin"===this.$store.state.user.userRole||this.beer.brewery&&this.beer.brewery.user===this.$store.state.user._id)}}},Nt=Ut,Mt=(r("a1ea"),Object(d["a"])(Nt,Lt,Et,!1,null,"3381bf70",null)),Ft=Mt.exports;p()(Mt,{VBtn:b["a"],VCard:te["a"],VCardText:re["a"],VCardTitle:re["b"],VChip:Te["a"],VCol:S["a"],VIcon:h["a"],VRow:z["a"]});var At=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"px-0"},[r("v-card-title",[e._v("Opinie")]),r("v-card-text",{staticClass:"px-0"},[e.$store.state.isLoggedIn?r("v-list-item",{staticStyle:{"z-index":"2"}},[r("Opinion",{attrs:{"target-object-id":e.targetObjectId},on:{opinionPosted:e.getOpinions}})],1):e._e(),r("v-list",{staticClass:"position-relative"},[r("loader",{attrs:{loading:e.loading}}),e.opinions.length?r("transition-group",{attrs:{name:"list"}},e._l(e.opinions,(function(t){return r("v-list-item",{key:t._id,staticClass:"my-3 list-item"},[r("Opinion",{attrs:{opinion:t,"target-object-id":e.targetObjectId,editable:e.canEdit(t),removable:e.canRemove(t)},on:{opinionModified:e.getOpinions,opinionRemoved:e.getOpinions}})],1)})),1):r("div",{staticClass:"px-4"},[r("p",[e._v("Brak opinii")])])],1)],1)],1)},qt=[],Zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"flex-grow-1"},[a("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit,o=t.invalid;return[a("v-card-title",{staticClass:"d-flex pb-0"},[a("div",[e.opinion?a("router-link",{staticClass:"d-flex",attrs:{to:"/users/"+e.opinion.user._id}},[a("img",{staticClass:"avatar-image-small avatar-image-rounded mr-3",attrs:{src:e.opinion.user.avatarImage?e.opinion.user.avatarImage:r("c121")}})]):e._e()],1),a("div",[e.opinion?a("router-link",{attrs:{to:"/users/"+e.opinion.user._id}},[e._v(" "+e._s(e.opinion.user.username)+" ")]):a("p",{staticClass:"my-0 py-0"},[e._v("Twoja opinia")]),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[e.opinion&&!e.editMode?a("star-rating",{attrs:{increment:.5,"star-size":20,"show-rating":!1,"read-only":!0},model:{value:e.opinion.rating,callback:function(t){e.$set(e.opinion,"rating",t)},expression:"opinion.rating"}}):a("star-rating",{attrs:{increment:.5,"star-size":20,"show-rating":!1,"read-only":!e.editMode},model:{value:e.emptyOpinion.rating,callback:function(t){e.$set(e.emptyOpinion,"rating",t)},expression:"emptyOpinion.rating"}}),e._l(r,(function(t){return a("p",{key:t},[e._v("err")])}))]}}],null,!0)})],1)]),a("v-card-text",[e.editMode?a("v-form",{attrs:{value:!o},on:{submit:function(t){return t.preventDefault(),n(e.submit)}}},[a("ValidationProvider",{staticClass:"flex-grow-1 ",attrs:{rules:"required|max:256"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("v-textarea",{staticClass:"mt-0",attrs:{rows:"3",error:n,"error-messages":r,label:"Co o tym sądzisz?"},model:{value:e.emptyOpinion.description,callback:function(t){e.$set(e.emptyOpinion,"description",t)},expression:"emptyOpinion.description"}})]}}],null,!0)}),a("v-btn",{attrs:{disabled:o,rounded:"",color:"info",block:"",type:"submit",loading:e.submitting}},[e._v(" "+e._s(e.submitButton)+" ")])],1):e.opinion?a("div",[e._v(" "+e._s(e.opinion.description)+" "),a("div",{staticClass:"mt-2"},[a("small",[e._v(e._s(new Date(e.opinion.createdDate).toLocaleString()))]),e.editMode?e._e():a("p",{staticClass:"float-right"},[e.editable?a("v-btn",{attrs:{rounded:"",color:"info"},on:{click:e.edit}},[e._v("Edytuj")]):e._e(),e.removable?a("v-btn",{attrs:{rounded:"",color:"error"},on:{click:e.remove}},[e._v("Usuń")]):e._e()],1)])]):e._e()],1)]}}])})],1)},Gt=[],Wt=(r("a4d3"),r("e01a"),{name:"Opinion",components:{StarRating:Oe.a},props:["opinion","editable","removable","targetObjectId"],data:function(){return{editMode:!1,emptyOpinion:{object:"",description:"",rating:null},submitting:!1}},computed:{submitButton:function(){return"Dodaj"}},mounted:function(){this.opinion||(this.editMode=!0)},methods:{edit:function(){this.editMode=!0,Object.assign(this.emptyOpinion,this.opinion)},remove:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.submitting=!0,t.next=4,e.$http.delete("/api/opinions/".concat(e.opinion._id));case 4:e.$store.toast.success("Usunięto opinię",{duration:4e3,position:"bottom-right"}),e.$emit("opinionRemoved"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$store.toast.error("Podczas usuwania opinii wystąpił błąd - ".concat(t.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 11:e.submitting=!1;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},submit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.submitting=!0,!e.opinion){t.next=15;break}return t.prev=2,t.next=5,e.$http.put("/api/opinions/".concat(e.opinion._id),e.emptyOpinion);case 5:e.$store.toast.success("Zapisano zmianny",{duration:4e3,position:"bottom-right"}),e.$emit("opinionModified"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),e.$store.toast.error("Podczas edycji opinii wystąpił błąd - ".concat(t.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 12:e.editMode=!1,t.next=29;break;case 15:return t.prev=15,e.emptyOpinion.object=e.targetObjectId,t.next=19,e.$http.post("/api/opinions",e.emptyOpinion);case 19:e.$store.toast.success("Dodano nową opinię",{duration:4e3,position:"bottom-right"}),e.$emit("opinionPosted"),e.emptyOpinion.description="",e.emptyOpinion.rating=null,e.$nextTick((function(){return e.$refs.form.reset()})),t.next=29;break;case 26:t.prev=26,t.t1=t["catch"](15),e.$store.toast.error("Podczas dodawania opinii wystąpił błąd - ".concat(t.t1.response.data.message),{duration:4e3,position:"bottom-right"});case 29:e.submitting=!1;case 30:case"end":return t.stop()}}),t,null,[[2,9],[15,26]])})))()}}}),Jt=Wt,Ht=Object(d["a"])(Jt,Zt,Gt,!1,null,"278fc594",null),Kt=Ht.exports;p()(Ht,{VBtn:b["a"],VCard:te["a"],VCardText:re["a"],VCardTitle:re["b"],VForm:ae["a"],VTextarea:Ye["a"]});var Qt={name:"OpinionsList",components:{Opinion:Kt,Loader:Ce},props:["targetObjectId"],data:function(){return{loading:!1,opinions:[]}},methods:{getOpinions:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$http.get("/api/opinions/?object=".concat(e.targetObjectId));case 4:r=t.sent,e.opinions=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$store.toast.error("Podczas ładowania opinii wystąpił błąd - ".concat(t.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 11:e.loading=!1;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},canEdit:function(e){return this.$store.state.isLoggedIn&&this.$store.state.user._id===e.user._id},canRemove:function(e){return this.$store.state.isLoggedIn&&(this.$store.state.user._id===e.user._id||"admin"==this.$store.state.user.userRole)}},created:function(){this.getOpinions()}},Xt=Qt,Yt=(r("2861"),Object(d["a"])(Xt,At,qt,!1,null,"4c27366d",null)),er=Yt.exports;p()(Yt,{VCard:te["a"],VCardText:re["a"],VCardTitle:re["b"],VList:w["a"],VListItem:y["a"]});var tr={name:"ProductView",components:{Opinions:er,BeerModal:tt,BeerDetails:Ft},data:function(){return{beer:{},loading:!1}},created:function(){this.getBeer()},methods:{getBeer:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$http.get("/api/beers/".concat(e.$route.params.id));case 4:r=t.sent,e.beer=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$store.toast.error("Podczas ładowania danych o piwie wystąpił błąd - ".concat(t.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 11:e.loading=!1;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},deleteBeer:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$http.delete("/api/beers/".concat(e.beer._id));case 4:e.$store.toast.info("Usunięto piwo",{duration:4e3,position:"bottom-right"}),e.$router.push("/search"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$store.toast.error("Podczas usuwania piwa wystąpił błąd - ".concat(t.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 11:e.loading=!1;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},editBeer:function(){this.$refs.beerModal.open(this.beer)}}},rr=tr,ar=Object(d["a"])(rr,zt,Dt,!1,null,"89c89136",null),nr=ar.exports;p()(ar,{VCol:S["a"],VContainer:I["a"],VRow:z["a"]});var or=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("h1",[e._v("Profil użytkownika:")]),e.$store.state.isLoggedIn&&e.$route.params.userID==e.$store.state.user._id?r("p",[e._v("To twój profil - możesz go edytować")]):e._e(),r("v-row",[r("v-col",[r("UserDetails",{attrs:{user:e.user,loading:e.loading},on:{updated:e.getUser}}),e.$store.state.isLoggedIn&&"admin"==e.$store.state.user.userRole&&e.$store.state.user._id!=this.$route.params.userID?[r("v-btn",{attrs:{rounded:"",color:"info"},on:{click:e.makeConsumer}},[e._v(" Uczyń zwykłym użytkownikiem ")]),r("v-btn",{attrs:{rounded:"",color:"info"},on:{click:e.makeOwner}},[e._v(" Uczyń właścicielem browaru ")]),r("v-btn",{attrs:{rounded:"",color:"info"},on:{click:e.makeAdmin}},[e._v(" Uczyń administratorem ")])]:e._e()],2),this.$store.state.isLoggedIn&&this.$store.state.user._id==this.$route.params.userID?r("v-col",{staticClass:"col-12 col-md-6 col-lg-3"},[r("ChangePassword")],1):e._e()],1)],1)},sr=[],ir=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("loader",{attrs:{loading:e.loading}}),a("v-card-text",{staticClass:"d-flex flex-md-row flex-column"},[a("img",{staticClass:"avatar-image mx-auto",attrs:{src:e.user.avatarImage?e.user.avatarImage:r("c121")}}),a("div",{staticClass:"px-3 flex-grow-1 mt-2"},[a("v-card-title",{staticClass:"pa-0 d-flex w-100"},[e._v(" "+e._s(e.user.username)+" "),a("UserModal",{ref:"userModal",attrs:{hidden:!0},on:{updated:function(t){return e.$emit("updated")}}})],1),a("p",[e._v("E-mail: "),a("a",{attrs:{href:"mailto:"+e.user.email}},[e._v(e._s(e.user.email))])]),a("p",[e._v("Data rejestracji: "+e._s(new Date(e.user.createdDate).toLocaleString()))]),a("p",[e._v("Rola: "+e._s(e.role))]),e.$store.state.isLoggedIn&&e.$store.state.user._id==e.user._id?a("v-btn",{attrs:{rounded:"",color:"info"},on:{click:e.editUser}},[e._v(" Edytuj profil ")]):e._e()],1)])],1)},lr=[],cr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"600"},on:{"click:outside":e.close},scopedSlots:e._u([e.hidden?null:{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{color:"secondary",rounded:""}},r),[e._v(" Edytuj profil ")])]}}],null,!0),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[e._v(" Edytuj profil "),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:e.close}},[a("v-icon",[e._v(" fas fa-times ")])],1)],1),a("v-card-text",[a("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit,o=t.invalid;return[a("v-form",{attrs:{value:!o},on:{submit:function(t){return t.preventDefault(),n(e.submit)}}},[a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"email"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("v-text-field",{attrs:{type:"email",error:n,"error-messages":r,label:"E-mail"},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required|max:50|min:4"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,n=t.error;return[a("v-text-field",{attrs:{error:n,"error-messages":r,label:"Nazwa użytkownika"},model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})]}}],null,!0)}),a("ValidationProvider",{staticClass:"flex-grow-1 d-flex",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,o=t.error;return[a("img",{staticClass:"avatar-image-small mr-3",attrs:{src:e.model.avatarImage?e.model.avatarImage:r("c121")}}),a("v-text-field",{attrs:{error:o,"error-messages":n,label:"Avatar użytkownika (adres URL)"},model:{value:e.model.avatarImage,callback:function(t){e.$set(e.model,"avatarImage",t)},expression:"model.avatarImage"}})]}}],null,!0)}),a("v-btn",{attrs:{type:"submit",rounded:"",disabled:o,loading:e.loading,block:"",color:e.edit?"info":"success"}},[e._v("Zapisz zmiany")])],1)]}}])})],1)],1)],1)},ur=[],dr={name:"UserModal",props:["hidden"],data:function(){return{template:{username:"",avatarImage:"",email:""},model:{},dialog:!1,edit:!1,loading:!1}},created:function(){Object.assign(this.model,this.template)},methods:{submit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.update();case 2:e.$emit("updated"),e.close();case 4:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$http.put("/api/users/".concat(e.model._id),e.model);case 4:return r=t.sent,t.next=7,e.$store.commit("setUserData",r.data);case 7:e.$store.toast.info("Zapisano zmiany",{duration:4e3,position:"bottom-right"}),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),e.$store.toast.error("Podczas edycji profilu - ".concat(t.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 13:e.loading=!1;case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},close:function(){Object.assign(this.model,this.template),this.dialog=!1,this.edit=!1},open:function(e){Object.assign(this.model,e),this.dialog=!0}}},mr=dr,pr=Object(d["a"])(mr,cr,ur,!1,null,null,null),vr=pr.exports;p()(pr,{VBtn:b["a"],VCard:te["a"],VCardText:re["a"],VCardTitle:re["b"],VDialog:Qe["a"],VForm:ae["a"],VIcon:h["a"],VSpacer:$["a"],VTextField:ne["a"]});var fr={name:"UserDetails",components:{Loader:Ce,UserModal:vr},props:["user","loading"],methods:{editUser:function(){this.$refs.userModal.open(this.user)}},computed:{role:function(){return"consumer"===this.user.userRole?"Zwykły użytkownik":"breweryOwner"===this.user.userRole?"Właściciel browaru":"admin"===this.user.userRole?"Administrator":""}}},br=fr,gr=Object(d["a"])(br,ir,lr,!1,null,"23dce3bb",null),hr=gr.exports;p()(gr,{VBtn:b["a"],VCard:te["a"],VCardText:re["a"],VCardTitle:re["b"]});var wr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("loader",{attrs:{loading:e.loading}}),r("v-card-title",[e._v("Zmiana hasła")]),r("v-card-text",[r("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit,n=t.invalid;return[r("v-form",{attrs:{value:!n},on:{submit:function(t){return t.preventDefault(),a(e.setPassword)}}},[r("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required",name:"confirm"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors,n=t.error;return[r("v-text-field",{attrs:{type:"password",error:n,"error-messages":a,label:"Obecne hasło"},model:{value:e.data.oldPassword,callback:function(t){e.$set(e.data,"oldPassword",t)},expression:"data.oldPassword"}})]}}],null,!0)}),r("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required",name:"confirm"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors,n=t.error;return[r("v-text-field",{attrs:{type:"password",error:n,"error-messages":a,label:"Nowe hasło"},model:{value:e.data.password,callback:function(t){e.$set(e.data,"password",t)},expression:"data.password"}})]}}],null,!0)}),r("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required|password:@confirm"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors,n=t.error;return[r("v-text-field",{attrs:{type:"password",error:n,"error-messages":a,label:"Powtórz nowe hasło"},model:{value:e.data.passwordRepeat,callback:function(t){e.$set(e.data,"passwordRepeat",t)},expression:"data.passwordRepeat"}})]}}],null,!0)}),r("v-btn",{staticClass:"lighten-5",attrs:{disabled:n,rounded:"",color:"primary",block:"",type:"submit",loading:e.loading}},[e._v("Zmień hasło")])],1)]}}])})],1)],1)},yr=[],xr={name:"ChangePassword",components:{Loader:Ce},data:function(){return{data:{oldPassword:"",password:""},loading:!1}},methods:{setPassword:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$http.put("/api/users/".concat(e.$store.state.user._id),e.data);case 4:e.$store.toast.success("Ustawiono nowe hasło - obwiązuje od kolejnego logowania",{duration:4e3,position:"bottom-right"}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),e.$store.toast.error("Podczas zmiany hasła wystąpił błąd - ".concat(t.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 10:e.data.password="",e.data.oldPassword="",e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,7]])})))()}}},_r=xr,kr=Object(d["a"])(_r,wr,yr,!1,null,"2b723e3d",null),Vr=kr.exports;p()(kr,{VBtn:b["a"],VCard:te["a"],VCardText:re["a"],VCardTitle:re["b"],VForm:ae["a"],VTextField:ne["a"]});var $r={name:"UserView",components:{ChangePassword:Vr,UserDetails:hr},data:function(){return{user:{username:"",email:"",createdDate:"",userRole:""},loading:!1}},watch:{"$route.params.userID":function(){this.getUser()}},mounted:function(){this.getUser()},methods:{getUser:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$route.params.userID!==e.$store.state.user._id){t.next=4;break}Object.assign(e.user,e.$store.state.user),t.next=16;break;case 4:return e.loading=!0,t.prev=5,t.next=8,e.$http.get("/api/users/".concat(e.$route.params.userID));case 8:r=t.sent,e.user=r.data,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](5),e.$store.toast.error("Podczas ładowania danych użytkownika wystąpił błąd - ".concat(t.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 15:e.loading=!1;case 16:case"end":return t.stop()}}),t,null,[[5,12]])})))()},setUser:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,r.prev=1,r.next=4,t.$http.put("/api/users/".concat(t.$route.params.userID),e);case 4:return r.next=6,t.getUser();case 6:t.$store.toast.info("Zapisano zmiany",{duration:4e3,position:"bottom-right"}),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](1),t.$store.toast.error("Błąd podczas edycji profilu - ".concat(r.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 12:t.loading=!1;case 13:case"end":return r.stop()}}),r,null,[[1,9]])})))()},makeConsumer:function(){var e={};Object.assign(e,this.user),e.userRole="consumer",this.setUser(e)},makeOwner:function(){var e={};Object.assign(e,this.user),e.userRole="breweryOwner",this.setUser(e)},makeAdmin:function(){var e={};Object.assign(e,this.user),e.userRole="admin",this.setUser(e)}}},Cr=$r,jr=Object(d["a"])(Cr,or,sr,!1,null,"6dea763a",null),Or=jr.exports;p()(jr,{VBtn:b["a"],VCol:S["a"],VContainer:I["a"],VRow:z["a"]});var Br=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-row",[r("v-col",{staticClass:"col-lg-8 col-12"},[r("v-row",[r("v-col",[r("BreweryModal",{ref:"breweryModal",attrs:{hidden:!0},on:{breweriesListEdited:e.getBrewery}}),r("BreweryDetails",{attrs:{brewery:e.brewery,loading:e.breweryLoading},on:{editBrewery:e.editBrewery,deleteBrewery:e.deleteBrewery}})],1)],1),r("v-row",[r("v-col",[r("v-card",[r("v-card-title",[e._v(" Piwa z tego browaru: ")]),r("v-card-text",[r("BeerList",{attrs:{beers:e.beers,loading:e.beersLoading}})],1)],1)],1)],1)],1),r("v-col",{staticClass:"col-lg-4 col-12"},[r("OpinionsList",{attrs:{"target-object-id":e.$route.params.id}})],1)],1)],1)},Rr=[],Tr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("loader",{attrs:{loading:e.loading}}),a("v-card-text",[a("v-card-title",[a("h1",[e._v("Browar:")])]),a("v-row",[a("v-col",{staticClass:"col-12 col-sm-auto d-flex"},[a("img",{staticClass:"avatar-image mx-auto",attrs:{src:e.brewery.image?e.brewery.image:r("3608")}})]),a("v-col",{staticClass:"flex-sm-grow-1 col-12 col-sm-auto"},[a("v-row",[a("v-col",{staticClass:"col-12 col-sm-8"},[a("v-card-title",{staticClass:"pa-0"},[e._v(" "+e._s(e.brewery.name)+" ")]),a("p",[e._v("Adres: "+e._s(e.brewery.address))]),a("p",[e._v("E-mail: "),a("a",{attrs:{href:"mailto:"+e.brewery.email}},[e._v(e._s(e.brewery.email))])]),a("p",[e._v("Telefon: "),a("a",{attrs:{href:"tel:"+e.brewery.phone}},[e._v(e._s(e.brewery.phone))])]),a("p",[e._v("Zarządza: "),e.brewery.user?a("router-link",{attrs:{to:"/users/"+e.brewery.user._id}},[e._v(e._s(e.brewery.user.username))]):a("span",[e._v("nienznay")])],1)],1),a("v-col",{staticClass:"col-12 col-sm-4"},[e._v(" Średnia ocena: "),e.brewery.avgRating?a("star-rating",{attrs:{"star-size":20,"read-only":!0,"round-start-rating":!1,increment:.01,"fixed-points":2},model:{value:e.brewery.avgRating,callback:function(t){e.$set(e.brewery,"avgRating",t)},expression:"brewery.avgRating"}}):a("p",[e._v("brak ocen")]),a("span",[e.canRemove?a("v-btn",{attrs:{icon:"",color:"danger"},on:{click:function(t){return e.$emit("deleteBrewery")}}},[a("v-icon",[e._v(" fas fa-trash ")])],1):e._e(),e.canEdit?a("v-btn",{attrs:{icon:"",color:"info"},on:{click:function(t){return e.$emit("editBrewery")}}},[a("v-icon",[e._v(" fas fa-pen ")])],1):e._e()],1)],1)],1)],1)],1)],1),a("div",{staticClass:"px-4 pb-4"},[a("h3",[e._v("Opis:")]),e._v(" "+e._s(e.brewery.description)+" ")])],1)},Sr=[],Ir={name:"BreweryDetails",components:{Loader:Ce,StarRating:Oe.a},props:["brewery","loading"],computed:{canEdit:function(){return this.brewery&&this.$store.state.isLoggedIn&&(this.brewery.user&&this.$store.state.user._id===this.brewery.user._id&&"breweryOwner"===this.$store.state.user.userRole||"admin"===this.$store.state.user.userRole)},canRemove:function(){return this.brewery&&this.$store.state.isLoggedIn&&(this.brewery.user&&this.$store.state.user._id===this.brewery.user._id&&"breweryOwner"===this.$store.state.user.userRole||"admin"===this.$store.state.user.userRole)}}},Pr=Ir,zr=Object(d["a"])(Pr,Tr,Sr,!1,null,"5a924e20",null),Dr=zr.exports;p()(zr,{VBtn:b["a"],VCard:te["a"],VCardText:re["a"],VCardTitle:re["b"],VCol:S["a"],VIcon:h["a"],VRow:z["a"]});var Lr={name:"BreweryView",components:{OpinionsList:er,BreweryModal:$t,BeerList:Ie,BreweryDetails:Dr},data:function(){return{beers:[],brewery:{},beersLoading:!1,breweryLoading:!1}},methods:{getBreweryBeers:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.beersLoading=!0,t.prev=1,t.next=4,e.$http.get("api/beers/?brewery=".concat(e.$route.params.id));case 4:r=t.sent,e.beers=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$store.toast.error("Podczas ładowania listy piw wystąpił błąd - ".concat(t.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 11:e.beersLoading=!1;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},getBrewery:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.breweryLoading=!0,t.prev=1,t.next=4,e.$http.get("api/breweries/".concat(e.$route.params.id));case 4:r=t.sent,e.brewery=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$store.toast.error("Podczas ładowania danych browaru wystąpił błąd - ".concat(t.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 11:e.breweryLoading=!1;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},deleteBrewery:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.delete("/api/breweries/".concat(e.brewery._id));case 3:e.$router.push("/breweries"),e.$store.toast.info("Usunięto browar",{duration:4e3,position:"bottom-right"}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$store.toast.error("Podczas usuwania browaru wystąpił błą - ".concat(t.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},editBrewery:function(){this.$refs.breweryModal.open(this.brewery)}},mounted:function(){this.getBrewery(),this.getBreweryBeers()}},Er=Lr,Ur=Object(d["a"])(Er,Br,Rr,!1,null,"63bbca45",null),Nr=Ur.exports;p()(Ur,{VCard:te["a"],VCardText:re["a"],VCardTitle:re["b"],VCol:S["a"],VContainer:I["a"],VRow:z["a"]});var Mr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-row",[r("v-col",[r("v-card",[r("v-card-title",[e._v(" Dostępne rodzaje piw: ")]),r("v-card-text",[e.$store.state.isLoggedIn?r("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit,n=t.invalid;return[r("v-form",{attrs:{value:!n},on:{submit:function(t){return t.preventDefault(),a(e.addBeerType)}}},[r("ValidationProvider",{staticClass:"flex-grow-1",attrs:{rules:"required|max:50"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors,n=t.error;return[r("v-text-field",{attrs:{error:n,"error-messages":a,label:"Dodaj nowy gatunek"},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}})]}}],null,!0)}),r("v-btn",{attrs:{rounded:"",color:"primary",type:"submit"}},[e._v(" Dodaj ")])],1)]}}],null,!1,1699688743)}):e._e(),r("loader",{attrs:{loading:e.loading}}),e.beerTypes.length?r("v-list",{attrs:{dense:""}},e._l(e.beerTypes,(function(t){return r("v-list-item",{key:t.id},[e._v(e._s(t.name))])})),1):r("p",[e._v("Brak - dodaj coś")])],1)],1)],1)],1)],1)},Fr=[],Ar={name:"BeerTypeView",components:{Loader:Ce},data:function(){return{beerTypes:[],loading:!1,newName:""}},mounted:function(){this.getBeerTypes()},methods:{getBeerTypes:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$http.get("api/beer-types");case 4:r=t.sent,e.beerTypes=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$store.toast.error("Błąd podczas pobiernia listy rodzajów piwa");case 11:e.loading=!1;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},addBeerType:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$http.post("api/beer-types",{name:e.newName});case 4:return t.next=6,e.getBeerTypes();case 6:e.$store.toast.success("Dodano nowy rodzaj piwa"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$store.toast.error("Błąd podczas dodawania");case 12:e.newName="",e.$nextTick((function(){return e.$refs.form.reset()})),e.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[1,9]])})))()}}},qr=Ar,Zr=Object(d["a"])(qr,Mr,Fr,!1,null,"3e8eff31",null),Gr=Zr.exports;p()(Zr,{VBtn:b["a"],VCard:te["a"],VCardText:re["a"],VCardTitle:re["b"],VCol:S["a"],VContainer:I["a"],VForm:ae["a"],VList:w["a"],VListItem:y["a"],VRow:z["a"],VTextField:ne["a"]}),n["a"].use(q["a"]);var Wr=[{path:"/",name:"Home",component:K},{path:"/login",name:"Login",component:se},{path:"/register",name:"Register",component:me},{path:"/search-beer",name:"Beer",component:ft},{path:"/breweries",name:"Breweries",component:Pt},{path:"/beers/:id",name:"ProductView",component:nr},{path:"/users/:userID",name:"UserView",component:Or},{path:"/beer-types",name:"BeerTypes",component:Gr},{path:"/breweries/:id",name:"BreweryView",component:Nr},{path:"*",component:K}],Jr=new q["a"]({mode:"history",base:"/",routes:Wr}),Hr=Jr,Kr=r("2f62"),Qr=r("bc3a"),Xr=r.n(Qr);function Yr(e){Xr.a.defaults.headers.common["Authorization"]="Bearer ".concat(e)}Xr.a.defaults.baseURL="/";var ea=r("04e1"),ta=r.n(ea);function ra(e){return Xr.a.post("/api/auth/login",e)}function aa(e){return Xr.a.post("/api/auth/refresh",{refreshToken:"Bearer ".concat(e)})}function na(e){return Xr.a.post("/api/users/register",e)}function oa(){return JSON.parse(localStorage.getItem("accessToken"))}function sa(){return JSON.parse(localStorage.getItem("refreshToken"))}function ia(){return JSON.parse(localStorage.getItem("user"))}function la(e){e.accessToken&&localStorage.setItem("accessToken",JSON.stringify(e.accessToken)),e.refreshToken&&localStorage.setItem("refreshToken",JSON.stringify(e.refreshToken))}function ca(e){e&&localStorage.setItem("user",JSON.stringify(e))}function ua(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user")}function da(e){return new Date(1e3*ta()(e).exp)}function ma(e){if(!e)return!1;var t=da(e);return!!t&&t>new Date}function pa(e){return va.apply(this,arguments)}function va(){return va=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!ma(oa())||!ia()){e.next=5;break}return r={accessToken:oa(),refreshToken:sa(),user:ia()},e.abrupt("return",t.dispatch("authorize",r));case 5:if(!ma(sa())){e.next=9;break}return e.next=8,t.dispatch("getNewRefreshToken").then((function(){return Promise.resolve()})).catch((function(e){return Promise.reject(e)}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),va.apply(this,arguments)}n["a"].use(Kr["a"]);var fa=new Kr["a"].Store({state:{isLoggedIn:null,auth:{accessToken:null,refreshToken:null},tokenTimeoutId:null,user:null},mutations:{login:function(e,t){e.isLoggedIn=!0,e.auth.accessToken=t.accessToken,e.auth.refreshToken=t.refreshToken,e.user=t.user},setUserData:function(e,t){e.user=t.user},logout:function(e){e.isLoggedIn=!1,e.auth.accessToken=null,e.auth.refreshToken=null,e.user=null},setTimeoutTokenId:function(e,t){e.tokenTimeoutId=t}},getters:{isLoggedIn:function(e){return e.isLoggedIn}},actions:{login:function(e,t){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.dispatch,a.prev=1,a.next=4,ra(t);case 4:o=a.sent,n("authorize",o.data),a.next=12;break;case 8:throw a.prev=8,a.t0=a["catch"](1),r.toast.error("Błąd logowania ".concat(a.t0.response.data.message),{duration:4e3,position:"bottom-right"}),Error(a.t0);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})))()},authorize:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=e.commit,n=e.dispatch,ma(t.accessToken)&&(a("login",t),la(t),ca(t.user),Yr(t.accessToken),n("refreshToken"));case 2:case"end":return r.stop()}}),r)})))()},refreshToken:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,a,n,o,s,i,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.commit,a=e.dispatch,n=e.state,n.tokenTimeoutId&&(clearTimeout(n.tokenTimeoutId),r("setTimeoutTokenId",null)),o=2e3,s=da(n.auth.accessToken)-new Date,i=o<s?s-o:s,!i){t.next=10;break}l=setTimeout((function(){a("getNewRefreshToken")}),i),r("setTimeoutTokenId",l),t.next=12;break;case 10:return t.next=12,a("getNewRefreshToken");case 12:case"end":return t.stop()}}),t)})))()},getNewRefreshToken:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var a,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.dispatch,n=e.state,r.prev=1,r.next=4,aa(n.auth.refreshToken);case 4:o=r.sent,a("authorize",o.data),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),t.toast.error("Błąd odnawiania tokenu ".concat(r.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},logout:function(e){var t=e.commit,r=e.state;r.tokenTimeoutId&&(clearTimeout(r.tokenTimeoutId),t("setTimeoutTokenId",null)),t("logout"),ua(),Yr(null),this.toast.success("Wylogowano",{duration:4e3,position:"bottom-right"})},register:function(e,t){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.commit,a.prev=1,a.next=4,na(t);case 4:r.toast.success("Zarejestrowano nowego użytkownika - teraz mozesz się zalogować",{duration:4e3,position:"bottom-right"}),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](1),r.toast.error("Błąd rejestracji ".concat(a.t0.response.data.message),{duration:4e3,position:"bottom-right"});case 10:case"end":return a.stop()}}),a,null,[[1,7]])})))()}},modules:{}}),ba=r("f309"),ga=r("8807"),ha=r.n(ga);r("15f5");n["a"].use(ba["a"]);var wa=new ba["a"]({theme:{themes:{light:{primary:"#004d40",secondary:"#795548",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}},lang:{locales:{pl:ha.a},current:"pl"},icons:{iconfont:"fa"}}),ya=r("7bb1"),xa=r("a65d"),_a=r.n(xa),ka=r("5530"),Va=r("4c93");Object(ya["c"])("email",Object(ka["a"])({},Va["b"],{message:"Podaj poprawny adres e-mail"})),Object(ya["c"])("password",{params:["target"],validate:function(e,t){var r=t.target;return e===r},message:"Hasła nie są identyczne"}),Object(ya["c"])("required",Object(ka["a"])({},Va["f"],{message:"To pole jest wymagane"})),Object(ya["c"])("numeric",Object(ka["a"])({},Va["e"],{message:"To pole może zawierać wyłącznie cyfry"})),Object(ya["c"])("max",Object(ka["a"])({},Va["c"],{params:["length"],message:"Zbyt długa nazwa. To pole może mieć maksymalnie {length} znaków"})),Object(ya["c"])("max_value",{params:["specified"],validate:function(e,t){var r=t.specified;return e<=r},message:"Maksimum {specified}"}),Object(ya["c"])("min_value",{params:["specified"],validate:function(e,t){var r=t.specified;return e>=r},message:"Minimum {specified}"}),Object(ya["c"])("min",Object(ka["a"])({},Va["d"],{params:["length"],message:"Zbyt krótkie. To pole musi mieć minimum {length} znaków"})),Object(ya["c"])("confirmed",Object(ka["a"])({},Va["a"],{params:["target"],message:"Hasła różnią się od siebie"})),n["a"].prototype.$http=Xr.a,n["a"].config.productionTip=!1,n["a"].component("ValidationProvider",ya["b"]),n["a"].component("ValidationObserver",ya["a"]),n["a"].use(_a.a),Xr.a.interceptors.response.use((function(e){return e}),function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.response.status,401!==r||t.response.config.url.endsWith("/login")){e.next=4;break}return e.next=4,fa.dispatch("logout");case 4:return e.abrupt("return",Promise.reject(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var $a=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,pa(fa);case 2:t=new n["a"]({router:Hr,store:fa,vuetify:wa,render:function(e){return e(A)}}).$mount("#app"),fa.toast=t.$toasted;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();$a(),Hr.beforeEach((function(e,t,r){var a=e.matched.some((function(e){return e.meta.requiresAuth})),n=fa.state.isLoggedIn;a&&!n?r("/login"):"/login"!=e.path&&"/register"!=e.path||!n?r():r("/")}))},"5c0b":function(e,t,r){"use strict";var a=r("7694"),n=r.n(a);n.a},7694:function(e,t,r){},"889b":function(e,t,r){},a1ea:function(e,t,r){"use strict";var a=r("f42f"),n=r.n(a);n.a},b34d:function(e,t,r){e.exports=r.p+"img/beer.c566cc9c.jpg"},c121:function(e,t,r){e.exports=r.p+"img/user.db0de70d.png"},c18a:function(e,t,r){},f42f:function(e,t,r){}});
//# sourceMappingURL=app.54236ba8.js.map